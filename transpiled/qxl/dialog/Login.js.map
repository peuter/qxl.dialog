{
  "version": 3,
  "sources": [
    "/home/runner/work/qxl.dialog/qxl.dialog/source/class/qxl/dialog/Login.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qxl",
    "dialog",
    "Dialog",
    "properties",
    "text",
    "check",
    "nullable",
    "apply",
    "textFont",
    "init",
    "checkCredentials",
    "showForgotPassword",
    "event",
    "forgotPasswordHandler",
    "events",
    "loginSuccess",
    "loginFailure",
    "members",
    "_text",
    "_username",
    "_password",
    "_applyText",
    "value",
    "old",
    "setValue",
    "setVisibility",
    "_applyTextFont",
    "setFont",
    "_createWidgetContent",
    "formTag",
    "FormTag",
    "container",
    "_createDialogContainer",
    "getLayout",
    "setAlignX",
    "add",
    "flex",
    "_image",
    "ui",
    "basic",
    "Image",
    "Label",
    "setAllowStretchX",
    "setTextFont",
    "form",
    "Composite",
    "gridLayout",
    "layout",
    "Grid",
    "setColumnAlign",
    "setColumnMinWidth",
    "setColumnFlex",
    "setLayout",
    "setMinWidth",
    "setMaxWidth",
    "labels",
    "tr",
    "i",
    "length",
    "set",
    "allowShrinkX",
    "paddingTop",
    "row",
    "column",
    "TextField",
    "addListener",
    "focus",
    "PasswordField",
    "getContentElement",
    "setAttribute",
    "e",
    "getKeyIdentifier",
    "_callCheckCredentials",
    "_message",
    "setRich",
    "buttonPane",
    "_createButtonPane",
    "loginButton",
    "_loginButton",
    "Button",
    "cancelButton",
    "_createCancelButton",
    "forgotPasswordButton",
    "getForgotPasswordHandler",
    "bind",
    "converter",
    "v",
    "setQxObjectId",
    "addOwnedQxObject",
    "getCheckCredentials",
    "getValue",
    "Function",
    "prototype",
    "_handleCheckCredentials",
    "lang",
    "_handleCancel",
    "hide",
    "err",
    "data",
    "setMessage",
    "fireDataEvent",
    "addListenerOnce",
    "Timer",
    "once",
    "selectAllText",
    "getCallback",
    "Login"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo dialog library\n   https://github.com/qooxdoo/qxl.dialog\n\n   Copyright:\n     2007-2019 Christian Boulanger and others\n\n   License:\n     LGPL: http://www.gnu.org/licenses/lgpl.html\n     EPL: http://www.eclipse.org/org/documents/epl-v10.php\n     See the LICENSE file in the project's top-level directory for details.\n\n************************************************************************ */\n\n\n/**\n * A dialog for authentication and login.\n *\n * The \"callback\" property containing a function is used as an (optional) final\n * callback after authentication has take place. This final callback will be\n * called with an truthy value as first argument (the error message/object) if\n * authentication has FAILED or with a falsy value (null/undefined) as first\n * argument, plus with a second optional argument (that can contain user\n * information) if it was SUCCESSFUL. The authenticating function must now be\n * stored in the checkCredentials property.\n */\nqx.Class.define(\"qxl.dialog.Login\", {\n  extend: qxl.dialog.Dialog,\n  properties: {\n\n    /**\n     * A html text that is displayed below the image (if present) and above the\n     * login\n     */\n    text: {\n      check: \"String\",\n      nullable: true,\n      apply: \"_applyText\"\n    },\n\n    /**\n     * The name of the font in the theme that should be applied to\n     * the text\n     */\n    textFont: {\n      check: \"String\",\n      nullable: true,\n      init: \"bold\",\n      apply: \"_applyTextFont\"\n    },\n\n    /**\n     * An asyncronous function to check the given credentials.\n     * The function signature is (username, password, callback). In case the\n     * login fails, the callback must be called with a string that can be\n     * alerted to the user or the error object if the problem is not due to\n     * authentication itself. If the login succeeds, the argument must be\n     * undefined or null. You can pass a second argument containing user\n     * information.\n     */\n    checkCredentials: {\n      check: \"Function\",\n      nullable: false\n    },\n\n    /**\n     * Whether to show a button with \"Forgot Password?\"\n     */\n    showForgotPassword: {\n      check: \"Boolean\",\n      nullable: false,\n      init: false,\n      event: \"changeShowForgotPassword\"\n    },\n\n    /**\n     * The function that is called when the user clicks on the \"Forgot Password?\"\n     * button\n     */\n    forgotPasswordHandler: {\n      check: \"Function\"\n    }\n  },\n\n  events: {\n    /**\n     * Event dispatched when login was successful\n     */\n    loginSuccess: \"qx.event.type.Data\",\n\n    /**\n     * Data event dispatched when login failed, event data\n     * contains a reponse message\n     */\n    loginFailure: \"qx.event.type.Data\"\n  },\n\n  members: {\n    _text: null,\n    _username: null,\n    _password: null,\n\n    /**\n     * Apply function used by proterty {@link #text}\n     * @param value {String} New value\n     * @param old {String} Old value\n     */\n    _applyText: function(value, old) {\n      this._text.setValue(value);\n      this._text.setVisibility(value ? \"visible\" : \"excluded\");\n    },\n\n    /**\n     * Apply function used by proterty {@link #textFont}\n     * @param value {String} New value\n     */\n    _applyTextFont: function(value) {\n      this._text.setFont(value);\n    },\n\n    /**\n     * Create the main content of the widget\n     */\n    _createWidgetContent: function() {\n      // wrap fields in form tag to avoid Chrome warnings, see https://github.com/qooxdoo/qxl.dialog/issues/19\n      let formTag = new qxl.dialog.FormTag();\n      let container = this._createDialogContainer();\n      container.getLayout().setAlignX(\"center\");\n      formTag.add(container, {flex:1});\n      this.add(formTag);\n      this._image = new qx.ui.basic.Image();\n      this._image.setVisibility(\"excluded\");\n      container.add(this._image);\n      this._text = new qx.ui.basic.Label();\n      this._text.setAllowStretchX(true);\n      this._text.setVisibility(\"excluded\");\n      this.setTextFont(\"bold\");\n      container.add(this._text);\n      let form = new qx.ui.container.Composite();\n      let gridLayout = new qx.ui.layout.Grid(9, 5);\n      gridLayout.setColumnAlign(0, \"right\", \"top\");\n      gridLayout.setColumnAlign(2, \"right\", \"top\");\n      gridLayout.setColumnMinWidth(0, 50);\n      gridLayout.setColumnFlex(1, 2);\n      form.setLayout(gridLayout);\n      form.setAlignX(\"center\");\n      form.setMinWidth(200);\n      form.setMaxWidth(400);\n      container.add(form);\n      let labels = [this.tr(\"Name\"), this.tr(\"Password\")];\n      for (let i = 0; i < labels.length; i++) {\n        form.add(\n          new qx.ui.basic.Label(labels[i]).set({\n            allowShrinkX: false,\n            paddingTop: 3\n          }),\n          {\n            row: i,\n            column: 0\n          }\n        );\n      }\n      this._username = new qx.ui.form.TextField();\n\n      this._username.addListener(\n        \"appear\",\n        function() {\n          this._username.focus();\n        },\n        this);\n\n      this._password = new qx.ui.form.PasswordField();\n      this._password.getContentElement().setAttribute(\"autocomplete\", \"password\");\n      this._password.addListener(\n        \"keypress\",\n        function(e) {\n          if (e.getKeyIdentifier() === \"Enter\") {\n            this._callCheckCredentials();\n          }\n        },\n        this\n      );\n      form.add(\n        this._username.set({\n          allowShrinkX: false,\n          paddingTop: 3\n        }),\n        {\n          row: 0,\n          column: 1\n        }\n      );\n      form.add(\n        this._password.set({\n          allowShrinkX: false,\n          paddingTop: 3\n        }),\n        {\n          row: 1,\n          column: 1\n        }\n      );\n      this._message = new qx.ui.basic.Label();\n      this._message.setRich(true);\n      this._message.setAllowStretchX(true);\n      this._message.setVisibility(\"excluded\");\n      container.add(this._message);\n\n      // buttons\n      let buttonPane = this._createButtonPane();\n\n      // login\n      let loginButton = (this._loginButton = new qx.ui.form.Button(\n        this.tr(\"Login\")\n      ));\n      loginButton.setAllowStretchX(false);\n      loginButton.addListener(\"execute\", this._callCheckCredentials, this);\n\n      // cancel\n      let cancelButton = this._createCancelButton();\n\n      // forgot password\n      let forgotPasswordButton = new qx.ui.form.Button(\n        this.tr(\"Forgot Password?\")\n      );\n      forgotPasswordButton.addListener(\n        \"click\",\n        function() {\n          this.getForgotPasswordHandler()();\n        },\n        this\n      );\n      this.bind(\"showForgotPassword\", forgotPasswordButton, \"visibility\", {\n        converter: function(v) {\n          return v ? \"visible\" : \"excluded\";\n        }\n      });\n\n      buttonPane.add(loginButton);\n      buttonPane.add(cancelButton);\n      buttonPane.add(forgotPasswordButton);\n      form.add(buttonPane, {\n        row: 3,\n        column: 1\n      });\n      // object ids\n      if (qx.core.Environment.get(\"module.objectid\") === true) {\n        form.setQxObjectId(\"form\");\n        this.addOwnedQxObject(form);\n        this._username.setQxObjectId(\"username\");\n        form.addOwnedQxObject(this._username);\n        this._password.setQxObjectId(\"password\");\n        form.addOwnedQxObject(this._password);\n        loginButton.setQxObjectId(\"login\");\n        buttonPane.addOwnedQxObject(loginButton);\n        forgotPasswordButton.setQxObjectId(\"forgot-password\");\n        buttonPane.addOwnedQxObject(forgotPasswordButton);\n        this.addOwnedQxObject(forgotPasswordButton);\n      }\n    },\n\n    /**\n     * Calls the checkCredentials callback function with username, password and\n     * the final callback, bound to the context object.\n     */\n    _callCheckCredentials: function() {\n      this.getCheckCredentials()(\n        this._username.getValue(),\n        this._password.getValue(),\n        typeof Function.prototype.bind === \"function\" ?\n          this._handleCheckCredentials.bind(this) :\n          qx.lang.Function.bind(this._handleCheckCredentials, this)\n      );\n    },\n\n    /**\n     * Handle click on cancel button\n     */\n    _handleCancel: function() {\n      this.hide();\n    },\n\n    /**\n     * Handler function called from the function that checks the credentials\n     * with the result of the authentication process.\n     * @param err {String|Error|null} If null, the authentication was successful\n     * and the \"loginSuccess\" event is dispatched. If String or Error, the\n     * \"loginFailure\" event is dispatched with the error message/object.\n     * Finally, the callback function in the callback property is called with\n     * null (success) or the error value.\n     * @param data {unknown|undefined} Optional second argument wich can contain\n     * user information\n     */\n    _handleCheckCredentials: function(err, data) {\n      //this._password.setValue(\"\");\n      this.setMessage(null);\n      if (err) {\n        this.fireDataEvent(\"loginFailure\", err);\n        this._username.addListenerOnce(\"focus\", function() {\n          qx.event.Timer.once(function() {\n            this._username.selectAllText();\n          }, this, 100);\n        }, this);\n        this._password.addListenerOnce(\"focus\", function() {\n          qx.event.Timer.once(function() {\n            this._password.selectAllText();\n          }, this, 100);\n        }, this);\n      } else {\n        this.fireDataEvent(\"loginSuccess\", data);\n        this.hide();\n      }\n      if (this.getCallback()) {\n        this.getCallback()(err, data);\n      }\n    },\n\n    /**\n     * @override\n     */\n    hide: function() {\n      this._password.setValue(\"\");\n      this.setMessage(null);\n      this.base(arguments);\n    }\n  }\n});\n"
  ]
}